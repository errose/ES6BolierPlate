var $ = require('jquery'); // Needs to be exposed globally for:
var Waypoint = require('exports?Waypoint!waypoints/lib/jquery.waypoints');
Waypoint.Sticky = require('exports?Waypoint.Sticky!waypoints/src/shortcuts/sticky');

var Stickable = (function () {

  var stickable = {};

  stickable.instances = [];

  stickable.init = function () {
    var self = this;
    $('[data-stickable]').each(function(){
      var offset = $(this).attr('data-stickable');
      self.stick(this, offset);
    });
  };
  stickable.stick = function (el, offset) {
    stickable.instances.push(new Waypoint.Sticky({
      element: $(el),
      stuckClass: 'is-stuck',
      offset: offset || 0
    }));
  };

  return stickable;

})();

module.exports = Stickable;
