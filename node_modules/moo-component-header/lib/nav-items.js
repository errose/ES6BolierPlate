var $ = require('jquery');
var Openable = require('moo-jsutil-openable');

var NavItems = (function () {

  var navItems = {};

  navItems.opts = {
    isBound: false
  };

  navItems.init = function () {
    var self = this;
    this.widthCheck();
    $(window).resize(function(){
      self.widthCheck();
    });
  };
  navItems.widthCheck = function () {
    var self = this,
        width = $(window).width();
    if(width >= 981 && self.opts.isBound){ // Not Mobile
      self.unbind();
    }
    else if(width < 981 && !self.opts.isBound) { // Mobile
      self.bind();
    }
  };
  navItems.bind = function () {
    var self = this;
    self.opts.isBound = true;
    $(document).on('click', '[data-nav-openable]', function(e){
      e.preventDefault();
      var target = $(this).attr('data-nav-openable');
      Openable.toggle(target);
    });
  };
  navItems.unbind = function () {
    var self = this;
    self.opts.isBound = false;
    $(document).off('click', '[data-nav-openable]');
  };

  return navItems;

})();

module.exports = NavItems;
